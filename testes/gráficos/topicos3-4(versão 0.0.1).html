<!-- 2.1.  O número de alunas que excedem a meta de pontos, em média, de todos os sprints realizados. O objetivo dos pontos é 70% do total de pontos em HSE e em tecnologia. Área
2.2.  A porcentagem que representa os dados anteriores em relação ao total de alunas. 
Por sede. O gráfico mostra, em cada barra de geração, a quantidade de alunas aprovadas com média maior ou igual a 70% em hse e tech. Nos quadrados, em um, o total de alunas da sede e, no outro, a quantidade e porcentagem das que foram aprovadas nos dois.  -->

<!-- A última geração de SCL tem dois undefined e a CDMX tem vários NaN-->

<!DOCTYPE html>
  <html>
    <head>
      <meta charset="utf-8">
      <title>Teste</title>
    </head>
    <body>
      <select id="drop-menu">
      </select>
      <div id="exibe-programadoras"></div>
      <script type="text/javascript" src="data.js"></script>
      <script type="text/javascript">

        var dropMenu = document.getElementById("drop-menu");
        dropMenu.addEventListener("change", achievement);
        // dropMenu.addEventListener("change", meanMentors);

        window.onload = loadMenu();

        function loadMenu(){
          var dropMenu = document.getElementById("drop-menu");
          dropMenu.innerHTML = "";
          var none = document.createElement("option");
          none.value = "none";
          none.innerHTML = "selecione";
          dropMenu.appendChild(none);
          for(place in data){
            var itemMenu = document.createElement("option");
            itemMenu.value = place;
            itemMenu.innerHTML = place;
            dropMenu.appendChild(itemMenu);
          }
        }

        function achievement() {
          var place = dropMenu.value;
          var mediaTech70 = 1260;
          var mediaHse70 = 840;
          // console.log(seat);
          var qtdAcima = 0;
          var totalStudents = 0;
          for(generation in data[place]){
            var mediaAlunas = [];
            // console.log(data[place][generation]);
            var students = data[place][generation]['students'];
            // console.log(students);
            for (student in students) {
              // console.log(students[student].name);
              var sprints = students[student]['sprints'];
              var somaTech = 0;
              var somaHse = 0;
              for (sprint in sprints) {
                var notaTech = sprints[sprint]['score']['tech'];
                var notaHse = sprints[sprint]['score']['hse'];
                somaTech += notaTech;
                somaHse += notaHse;
                // console.log(notaTech);
                // console.log(notaHse);
              }
              // console.log(somaTech);
              // console.log(somaHse);
              // console.log(sprints.length); 
              var mediaTech = Math.ceil(somaTech / sprints.length);
              var mediaHse = Math.ceil(somaHse / sprints.length);
              // console.log(mediaTech); 
              // console.log(mediaHse); 
              mediaAlunas.push([students[student].name, mediaTech, mediaHse]);
              if (mediaTech >= mediaTech70 && mediaHse >= mediaHse70) {
                qtdAcima += 1;
              }
            }
            totalStudents += students.length;
            console.log(mediaAlunas);
          }
          console.log(qtdAcima);
          console.log(totalStudents);
          var percentual = Math.round((qtdAcima * 100) / totalStudents);
          console.log(percentual);
        }

      </script>

    </body>
  </html>





